<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>버추얼 테이블 프로젝트 - 인터랙티브 운영 가이드</title>
    <!-- Chosen Palette: Calm Neutrals -->
    <!-- Application Structure Plan: A task-oriented, interactive step-by-step guide. The structure is divided into Roles, a 3-step Workflow, a new Strategy section, and an Equipment Appendix. The core interaction is a set of tabs in Step 2 that allows users to toggle between the 'Automated' and 'Manual' data transfer workflows. This structure was chosen to make the complex process easy to follow and reference in the field, allowing users to focus only on the relevant procedure at any given time, thus enhancing usability. -->
    <!-- Visualization & Content Choices: Roles -> Goal: Inform -> 4-column grid layout with icons -> Justification: Clear separation of responsibilities for all team members. Workflow Step 2 -> Goal: Organize/Compare -> Interactive Tabs (JS toggle) -> Justification: Allows user to select and view one of two distinct processes without clutter. Strategy -> Goal: Inform/Compare -> 4-column grid of cards with icons -> Justification: Clearly delineates the different strategies for each tournament phase. Verification -> Goal: Inform/Organize -> Interactive HTML checklist -> Justification: Visually represents the required verification steps. Equipment -> Goal: Inform -> Grid of cards with icons -> Justification: Easy-to-scan visual checklist. All visuals use HTML/CSS/Tailwind and Lucide icons. Confirmed NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
            color: #1C1917; /* stone-900 */
        }
        .section-title {
            font-weight: 900;
            color: #047857; /* emerald-700 */
        }
        .step-card {
            background-color: white;
            border: 1px solid #E7E5E4; /* stone-200 */
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease-in-out;
        }
        .role-card {
             cursor: pointer;
        }
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        .tab-button.active {
            color: #047857; /* emerald-700 */
            border-bottom-color: #047857; /* emerald-700 */
            font-weight: 700;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .contingency-plan {
            background-color: #FEFCE8; /* yellow-50 */
            border: 1px solid #FACC15; /* yellow-400 */
            border-left-width: 4px;
        }
        .info-box {
            background-color: #F0F9FF; /* sky-50 */
            border: 1px solid #7DD3FC; /* sky-300 */
            border-left-width: 4px;
        }
        .verified-box {
            background-color: #F0FDF4; /* green-50 */
            border: 1px solid #86EFAC; /* green-300 */
            border-left-width: 4px;
            border-left-color: #22C55E; /* green-500 */
        }
        .checklist-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s ease;
        }
        .checklist-item:hover {
            background-color: #F5F5F4; /* stone-100 */
        }
        .checklist-item input:checked + label {
            text-decoration: line-through;
            color: #78716C; /* stone-500 */
        }
        .table-map {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.75rem;
            position: relative;
        }
        .table-cell {
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 500;
            background-color: #E7E5E4; /* stone-200 */
            color: #78716C; /* stone-500 */
            position: relative;
        }
        .table-notable {
            background-color: #A7F3D0; /* emerald-200 */
            color: #065F46; /* emerald-800 */
            border: 2px solid #10B981; /* emerald-500 */
            font-weight: 700;
        }
        .table-route-node {
            background-color: #BAE6FD; /* sky-200 */
            color: #075985; /* sky-800 */
            border: 2px solid #38BDF8; /* sky-400 */
            font-weight: 700;
        }
        .route-arrow {
            position: absolute;
            color: #0ea5e9; /* sky-500 */
            width: 1.5rem;
            height: 1.5rem;
            stroke-width: 2.5;
            z-index: 10;
        }

        /* Interactive Workflow Styles */
        .workflow-popup {
            position: absolute;
            top: calc(100% + 0.75rem); /* Position below the card with a gap */
            left: 0; /* Initial position, will be adjusted by JS */
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out, transform 0.3s ease-in-out;
            transform: translateY(-10px) scale(0.95);
            transform-origin: top center;
            z-index: 20;
            background-color: white;
            border: 1px solid #d6d3d1;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            padding: 1rem;
            width: max-content;
            max-width: 90vw; /* Limit max width relative to viewport */
            pointer-events: none;
        }
        .group:hover .workflow-popup {
            visibility: visible;
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        .group:hover .role-card {
            transform: translateY(-8px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            border-color: #34D399; /* emerald-400 */
            background-color: #F0FDF4; /* emerald-50 */
        }
        .flow-step {
            background-color: #F5F5F4; /* stone-100 */
            border: 1px solid #D6D3D1; /* stone-300 */
            border-radius: 0.5rem;
            padding: 0.5rem 0.75rem;
            font-size: 0.8rem;
            font-weight: 500;
            text-align: center;
            flex-shrink: 0;
            white-space: nowrap;
        }
        .flow-arrow {
            color: #A8A29E; /* stone-400 */
            flex-shrink: 0;
        }
        .flow-branch {
            border-left: 2px dashed #A8A29E; /* stone-400 */
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            overflow-y: auto; /* Enable scrolling on the overlay */
            align-items: flex-start; /* Align content to the top */
            padding: 5vh 1rem; /* Add vertical padding */
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: white;
            padding: 2.5rem;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 640px;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s ease;
            margin: 0; /* Remove auto margin */
        }
        .modal-overlay.active .modal-content {
            transform: scale(1);
        }
        .modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            cursor: pointer;
            color: #78716C; /* stone-500 */
        }
        .modal-close-btn:hover {
            color: #1C1917; /* stone-900 */
        }
        
        /* New Visual Workflow Styles */
        .detail-step {
            position: relative;
            padding-left: 3rem; 
            padding-bottom: 2.5rem;
        }
        .detail-step:last-child {
            padding-bottom: 0;
        }
        .detail-step-icon {
            position: absolute;
            left: 0;
            top: 0;
            width: 2.25rem;
            height: 2.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ECFDF5; /* emerald-50 */
            color: #059669; /* emerald-600 */
            border-radius: 9999px;
            border: 4px solid #BBF7D0; /* emerald-200 */
        }
        .detail-step-connector {
            position: absolute;
            left: 1.05rem;
            top: 2.25rem;
            bottom: -2.5rem;
            width: 2px;
            background-color: #D1FAE5; /* emerald-100 */
        }
        .detail-step:last-child .detail-step-connector {
            display: none;
        }
        .detail-step-content strong {
            font-size: 1.125rem;
            font-weight: 700;
            color: #065F46; /* emerald-800 */
            display: block;
            margin-bottom: 0.25rem;
        }
        .detail-step-content p, .detail-step-content ul {
            font-size: 0.95rem;
            color: #57534E; /* stone-600 */
        }
        .sub-step-card {
            background-color: #F8FAFC; /* slate-50 */
            border: 1px solid #E2E8F0; /* slate-200 */
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 0.75rem;
        }
        .sub-step-card strong {
            font-size: 1rem;
            color: #1E293B; /* slate-800 */
        }
        .workflow-detail .list-disc {
            list-style-type: disc;
            padding-left: 1.25rem;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body class="antialiased">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">
        
        <header class="flex flex-col md:flex-row items-center justify-between mb-16">
            <div class="text-center md:text-left">
                <h1 class="text-4xl md:text-5xl font-black text-stone-800">버추얼 테이블 프로젝트</h1>
                <p class="mt-4 text-lg text-stone-600">인터랙티브 현장 운영 가이드라인</p>
            </div>
            <a href="https://garimto81.github.io/virtual_table_rehearsal" target="_blank" rel="noopener noreferrer" class="mt-6 md:mt-0 inline-flex items-center bg-emerald-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-emerald-700 transition-colors duration-300">
                <i data-lucide="clipboard-check" class="w-5 h-5 mr-2"></i>
                리허설 결과 및 상세 프로세스 보기
            </a>
        </header>

        <main class="space-y-20">
            <!-- Section 1: Roles & Responsibilities -->
            <section id="roles">
                <h2 class="section-title text-3xl text-center mb-4">주요 역할 및 책임 (R&R)</h2>
                <p class="text-center text-stone-600 mb-10">각 역할별 카드를 클릭하면 정확한 프로세스 메뉴얼을 보여줌</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    
                    <!-- Director Card -->
                    <div class="group relative" data-role="director">
                        <div class="step-card role-card text-center h-full">
                            <i data-lucide="video" class="w-12 h-12 text-emerald-600 mx-auto mb-4"></i>
                            <h3 class="text-xl font-bold mb-2">디렉터</h3>
                            <p class="text-sm text-stone-600">방송 콘텐츠의 방향성을 결정하고 촬영할 노터블 플레이어를 최종 선정합니다.</p>
                        </div>
                        <div class="workflow-popup">
                            <h4 class="font-bold text-center mb-3 text-sm">디렉터 워크플로우</h4>
                            <div class="flex items-center justify-center space-x-2">
                                <div class="flow-step">연출 기획</div>
                                <i data-lucide="arrow-right" class="flow-arrow w-5 h-5"></i>
                                <div class="flow-step">데이터 확보</div>
                                <i data-lucide="arrow-right" class="flow-arrow w-5 h-5"></i>
                                <div class="flow-step">대상 선정</div>
                                <i data-lucide="arrow-right" class="flow-arrow w-5 h-5"></i>
                                <div class="flow-step text-emerald-700 bg-emerald-50 border-emerald-200">PD에게 전달</div>
                            </div>
                        </div>
                    </div>

                    <!-- Cameraman Card -->
                    <div class="group relative" data-role="pd">
                        <div class="step-card role-card text-center h-full">
                            <i data-lucide="camera" class="w-12 h-12 text-emerald-600 mx-auto mb-4"></i>
                            <h3 class="text-xl font-bold mb-2">카메라 맨</h3>
                            <p class="text-sm text-stone-600">현장에서 콘텐츠 가치를 판단하여 중요한 순간만을 선별하여 촬영합니다.</p>
                        </div>
                        <div class="workflow-popup">
                            <h4 class="font-bold text-center mb-3 text-sm">카메라 맨 워크플로우</h4>
                            <div class="flex items-center">
                                <div class="flow-step">현장 촬영</div>
                                <i data-lucide="arrow-right" class="flow-arrow w-5 h-5 mx-2"></i>
                                <div class="flex flex-col space-y-2">
                                    <!-- Top Branch for Video Data -->
                                    <div class="flex items-center">
                                        <div class="flow-step">촬영 데이터 (영상)</div>
                                        <i data-lucide="arrow-right" class="flow-arrow w-4 h-4 mx-2"></i>
                                        <div class="flex flex-col space-y-1">
                                             <div class="flow-step bg-sky-100 border-sky-300 text-sky-800 text-xs">무선 (클라우드)</div>
                                             <div class="flow-step bg-yellow-100 border-yellow-300 text-yellow-800 text-xs">유선 (SD카드)</div>
                                        </div>
                                        <i data-lucide="arrow-right" class="flow-arrow w-4 h-4 mx-2"></i>
                                        <div class="flow-step text-emerald-700 bg-emerald-50 border-emerald-200">후반팀</div>
                                    </div>
                                    <!-- Bottom Branch for Guide -->
                                    <div class="flex items-center">
                                        <div class="flow-step">인/아웃점 가이드</div>
                                        <i data-lucide="arrow-right" class="flow-arrow w-4 h-4 mx-2"></i>
                                        <div class="flow-step text-sky-700 bg-sky-50 border-sky-200">데이터 매니저</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Manager Card -->
                    <div class="group relative" data-role="manager">
                        <div class="step-card role-card text-center h-full">
                            <i data-lucide="database" class="w-12 h-12 text-emerald-600 mx-auto mb-4"></i>
                            <h3 class="text-xl font-bold mb-2">데이터 매니저</h3>
                            <p class="text-sm text-stone-600">촬영된 영상의 모든 액션을 정확하게 기록하고 데이터를 관리, 검증합니다.</p>
                        </div>
                         <div class="workflow-popup">
                            <h4 class="font-bold text-center mb-3 text-sm">데이터 매니저 워크플로우</h4>
                            <div class="flex flex-col items-center space-y-2">
                                <div class="flex space-x-4">
                                    <div class="flow-step">데이터 생성(App)</div>
                                    <div class="flow-step">인/아웃점 가이드 수령</div>
                                </div>
                                <i data-lucide="arrow-down" class="flow-arrow w-4 h-4"></i>
                                <div class="flow-step">구글 시트에 통합 기록</div>
                                <i data-lucide="arrow-down" class="flow-arrow w-4 h-4"></i>
                                <div class="flow-step text-emerald-700 bg-emerald-50 border-emerald-200">후반팀에 공유</div>
                            </div>
                        </div>
                    </div>

                    <!-- Post-Editor Card -->
                    <div class="group relative" data-role="editor">
                        <div class="step-card role-card text-center h-full">
                            <i data-lucide="scissors" class="w-12 h-12 text-emerald-600 mx-auto mb-4"></i>
                            <h3 class="text-xl font-bold mb-2">후반 편집자</h3>
                            <p class="text-sm text-stone-600">영상과 데이터를 취합하여 Poker UI 그래픽을 완성하고 최종 콘텐츠를 제작합니다.</p>
                        </div>
                        <div class="workflow-popup">
                            <h4 class="font-bold text-center mb-3 text-sm">후반 편집 워크플로우</h4>
                            <div class="flex flex-col items-center space-y-2">
                               <div class="text-center">
                                   <div class="text-xs font-bold text-stone-500 mb-1">프리 프로덕션</div>
                                   <div class="flow-step">그래픽 수령</div>
                               </div>
                               <div class="w-full my-1 border-t-2 border-dashed border-stone-300"></div>
                               <div class="text-center">
                                   <div class="text-xs font-bold text-stone-500 mb-1">프로덕션</div>
                                   <div class="flow-step">구글 시트 데이터 수령</div>
                               </div>
                               <i data-lucide="arrow-down" class="flow-arrow w-4 h-4"></i>
                               <div class="flow-step">영상과 비교하여 데이터 검증</div>
                               <i data-lucide="arrow-down" class="flow-arrow w-4 h-4"></i>
                               <div class="flow-step">구글 시트 데이터 적용</div>
                               <i data-lucide="arrow-down" class="flow-arrow w-4 h-4"></i>
                               <div class="flow-step bg-emerald-100 border-emerald-200">Poker UI 그래픽 완성</div>
                               <i data-lucide="arrow-down" class="flow-arrow w-4 h-4"></i>
                               <div class="flow-step">영상과 결합</div>
                               <i data-lucide="arrow-down" class="flow-arrow w-4 h-4"></i>
                               <div class="flow-step">불필요한 부분 편집</div>
                               <i data-lucide="arrow-down" class="flow-arrow w-4 h-4"></i>
                               <div class="flow-step">인/아웃점 편집</div>
                               <i data-lucide="arrow-down" class="flow-arrow w-4 h-4"></i>
                               <div class="flex items-center">
                                   <div class="flow-step">콘텐츠 완성</div>
                                   <i data-lucide="arrow-right" class="flow-arrow w-4 h-4 mx-2"></i>
                                   <div class="flow-step text-emerald-700 bg-emerald-50 border-emerald-200">최종 전달</div>
                               </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-16">
                    <h3 class="text-2xl font-bold text-stone-700 text-center mb-8">지원 역할 (Support Roles)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                        <!-- Graphic Designer Card -->
                        <div class="group relative" data-role="designer">
                            <div class="step-card role-card text-center h-full">
                                <i data-lucide="figma" class="w-12 h-12 text-emerald-600 mx-auto mb-4"></i>
                                <h3 class="text-xl font-bold mb-2">그래픽 디자이너</h3>
                                <p class="text-sm text-stone-600">콘텐츠에 사용될 Poker UI 그래픽 에셋을 제작하고 시스템을 설계합니다.</p>
                            </div>
                            <div class="workflow-popup">
                               <h4 class="font-bold text-center mb-3 text-sm">그래픽 디자이너 워크플로우</h4>
                               <div class="flex items-center justify-center space-x-2">
                                   <div class="flow-step">Poker UI 그래픽 작업</div>
                                   <i data-lucide="arrow-right" class="flow-arrow w-5 h-5"></i>
                                   <div class="flow-step text-emerald-700 bg-emerald-50 border-emerald-200">후반 편집자 전달</div>
                               </div>
                           </div>
                       </div>
                        <!-- Technical Director Card -->
                        <div class="group relative" data-role="tech">
                            <div class="step-card role-card text-center h-full">
                                <i data-lucide="server" class="w-12 h-12 text-emerald-600 mx-auto mb-4"></i>
                                <h3 class="text-xl font-bold mb-2">기술 감독</h3>
                                <p class="text-sm text-stone-600">원활한 데이터 전송을 위한 현장 네트워크 환경을 구축하고 지원합니다.</p>
                            </div>
                             <div class="workflow-popup">
                                <h4 class="font-bold text-center mb-3 text-sm">기술 감독 워크플로우</h4>
                                <div class="flex items-center justify-center space-x-2">
                                    <div class="flow-step">10Mbps+ 전용 라인 확보</div>
                                    <i data-lucide="arrow-right" class="flow-arrow w-5 h-5"></i>
                                    <div class="flow-step text-emerald-700 bg-emerald-50 border-emerald-200">현장 PD팀에 공유</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </section>
            
            <!-- Section 4: Appendix -->
            <section id="equipment">
                <h2 class="section-title text-3xl text-center mb-12">부록: 추천 장비 및 필수 액세서리</h2>
                
                <h3 class="text-xl font-bold text-center text-stone-700 mb-8">필수 액세서리</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-16">
                    <div class="step-card text-center">
                        <i data-lucide="battery-charging" class="w-10 h-10 mx-auto text-emerald-600 mb-3"></i>
                        <h4 class="font-bold">여분 배터리</h4>
                        <p class="text-sm text-stone-600">최소 3개 이상</p>
                    </div>
                    <div class="step-card text-center">
                        <i data-lucide="power" class="w-10 h-10 mx-auto text-emerald-600 mb-3"></i>
                        <h4 class="font-bold">보조 배터리</h4>
                        <p class="text-sm text-stone-600">대용량 Power Bank</p>
                    </div>
                    <div class="step-card text-center">
                        <i data-lucide="grip" class="w-10 h-10 mx-auto text-emerald-600 mb-3"></i>
                        <h4 class="font-bold">거치대</h4>
                        <p class="text-sm text-stone-600">소형 삼각대/고릴라포드</p>
                    </div>
                </div>

                <h3 class="text-xl font-bold text-center text-stone-700 mb-8">추천 장비</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto">
                    <div>
                        <img src="https://github.com/garimto81/virtual_table_plan/blob/main/image%20(14).png?raw=true" alt="고프로 카메라" class="w-full aspect-square object-cover rounded-lg shadow-md border border-stone-200" onerror="this.onerror=null;this.src='https://placehold.co/400x400/e7e5e4/78716c?text=GoPro';">
                        <p class="text-center text-sm text-stone-600 mt-2 font-medium">고프로 시리즈</p>
                    </div>
                    <div>
                        <img src="https://github.com/garimto81/virtual_table_plan/blob/main/7b61f79b79143119a859898dae9521@ultra.png?raw=true" alt="DJI 액션 카메라" class="w-full aspect-square object-cover rounded-lg shadow-md border border-stone-200" onerror="this.onerror=null;this.src='https://placehold.co/400x400/e7e5e4/78716c?text=DJI+Action';">
                        <p class="text-center text-sm text-stone-600 mt-2 font-medium">DJI 액션 시리즈</p>
                    </div>
                    <div>
                        <img src="https://github.com/garimto81/virtual_table_plan/blob/main/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-08-26%20181427.png?raw=true" alt="오즈모 포켓 카메라" class="w-full aspect-square object-cover rounded-lg shadow-md border border-stone-200" onerror="this.onerror=null;this.src='https://placehold.co/400x400/e7e5e4/78716c?text=Osmo+Pocket';">
                        <p class="text-center text-sm text-stone-600 mt-2 font-medium">오즈모 포켓 시리즈</p>
                    </div>
                </div>
                <div class="max-w-5xl mx-auto mt-6">
                    <div class="contingency-plan rounded-lg p-4">
                        <div class="flex items-center">
                            <i data-lucide="smartphone-off" class="w-8 h-8 text-yellow-600 mr-4 shrink-0"></i>
                            <div>
                                <h4 class="font-bold text-yellow-800">참고: 아이폰 시리즈 제외 사유</h4>
                                <p class="text-sm text-yellow-700 mt-1">아이폰 시리즈는 2024년 WSOP BAHAMAS 현장에서 플레이어들의 촬영 거부 반응이 있어 추천 장비에서 제외되었습니다.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-20 pt-8 border-t border-stone-200">
            <p class="text-sm text-stone-500">&copy; 2025 Virtual Table Project. All Rights Reserved.</p>
        </footer>
    </div>
    
    <!-- Modal -->
    <div id="workflow-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="modal-close" class="modal-close-btn">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h3 id="modal-title" class="text-2xl font-bold text-stone-800 mb-6"></h3>
            <div id="modal-body" class="workflow-detail"></div>
        </div>
    </div>

    <!-- Hidden Detailed Workflow Content -->
    <div class="hidden">
        <div id="detail-director">
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="clipboard-list"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>1. 연출 기획</strong>
                    <p>콘텐츠의 전반적인 방향성을 결정하고, 촬영할 주요 선수군(노터블 플레이어)을 리스트업합니다.</p>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="user-check"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>2. 최종 대상 선정</strong>
                    <p>기획팀으로부터 전달받은 선수 이력과 현장 상황(테이블 위치, 스택 사이즈 등)을 종합하여 최종 촬영 대상을 선정합니다.</p>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="send"></i></div>
                <div class="detail-step-content">
                    <strong>3. 현장팀 전달</strong>
                    <p>선정된 플레이어 리스트와 주요 관전 포인트를 포함한 촬영 가이드를 현장 PD에게 명확하게 전달합니다.</p>
                </div>
            </div>
        </div>
        <div id="detail-pd">
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="list-checks"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>1. 촬영 준비</strong>
                    <p>디렉터로부터 전달받은 리스트를 숙지하고, 카메라, 배터리 등 장비를 세팅합니다. 지정된 노터블 플레이어의 테이블 위치를 파악하고 최적의 촬영 동선을 설계합니다.</p>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="video"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>2. 현장 촬영</strong>
                    <ul class="list-disc space-y-2">
                        <li>노터블 플레이어가 참여하는 핸드, 팟 사이즈가 큰 핸드 등 콘텐츠 가치가 높은 순간을 판단하여 촬영을 진행합니다.</li>
                        <li><span class="font-bold text-red-600">중요:</span> 1개의 핸드는 반드시 1개의 레코딩 파일만 존재해야 합니다. 만약 핸드 진행 도중 실수로 레코딩을 종료했다면, 해당 핸드는 추가 레코딩을 진행하지 않습니다.</li>
                    </ul>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="arrow-right-left"></i></div>
                <div class="detail-step-content">
                    <strong>3. 데이터 전달 및 메모리 관리</strong>
                    <div class="space-y-4">
                        <div class="sub-step-card">
                            <strong>파일 번호 공유</strong>
                            <p>핸드 촬영 종료 후, 카메라에 표시된 파일 번호를 데이터 매니저에게 전달하여 앱에 기록합니다. 파일명은 아래 규칙을 따릅니다.</p>
                            <div class="mt-3 pt-3 border-t border-slate-200">
                                <p class="font-semibold text-slate-700 text-sm">카메라 맨 파일 규칙:</p>
                                <p class="text-sm mt-1 text-slate-600">cam(카메라 순서 대문자 알파벳)(카메라맨에 귀속된 메모리 카드 순서 소문자 알파벳)일련번호</p>
                                <p class="mt-2 text-sm"><strong>예시:</strong> <code class="bg-slate-200 text-slate-800 px-2 py-1 rounded">camAa0001</code>, <code class="bg-slate-200 text-slate-800 px-2 py-1 rounded">camAb0003</code>, <code class="bg-slate-200 text-slate-800 px-2 py-1 rounded">camBa0011</code></p>
                            </div>
                        </div>
                        <div class="sub-step-card">
                            <strong>메모리 카드 교체 (분기)</strong>
                            <ul class="list-disc space-y-4 mt-2">
                               <li>
                                    <strong>Case 1. 후반 편집자가 현장에 있는 경우:</strong>
                                    <div class="mt-4 p-4 bg-slate-50 rounded-lg border border-slate-200">
                                        <h4 class="font-bold text-center mb-4 text-slate-800">메모리 카드 순환 워크플로우</h4>
                                        <div class="relative w-full h-72">
                                            <!-- Roles -->
                                            <div class="absolute top-0 left-1/2 -translate-x-1/2 text-center">
                                                <i data-lucide="camera" class="w-10 h-10 text-slate-700 mx-auto"></i>
                                                <p class="font-bold text-sm mt-1">카메라 맨</p>
                                            </div>
                                            <div class="absolute bottom-0 left-1/2 -translate-x-1/2 text-center">
                                                <i data-lucide="monitor" class="w-10 h-10 text-slate-700 mx-auto"></i>
                                                <p class="font-bold text-sm mt-1">후반팀</p>
                                            </div>
                                            <!-- Bins -->
                                            <div class="absolute top-1/2 -translate-y-1/2 left-0 text-center">
                                                <div class="relative w-28 h-24 border-2 border-dashed border-green-500 bg-green-50 rounded-lg flex flex-col items-center justify-center">
                                                    <i data-lucide="sd-card" class="w-8 h-8 text-green-600"></i>
                                                    <p class="text-sm mt-1 font-semibold text-green-800">작업 완료 통</p>
                                                </div>
                                            </div>
                                            <div class="absolute top-1/2 -translate-y-1/2 right-0 text-center">
                                                <div class="relative w-28 h-24 border-2 border-dashed border-sky-500 bg-sky-50 rounded-lg flex flex-col items-center justify-center">
                                                    <i data-lucide="sd-card" class="w-8 h-8 text-sky-600"></i>
                                                    <p class="text-sm mt-1 font-semibold text-sky-800">미작업 통</p>
                                                </div>
                                            </div>
                                            
                                            <!-- Arrows & Labels -->
                                            <div class="absolute top-[20%] left-[25%] -translate-x-1/2 -translate-y-1/2 text-center">
                                                <p class="text-xs font-semibold text-slate-500 mb-1">① 수령</p>
                                                <i data-lucide="arrow-up-right" class="w-8 h-8 text-slate-400"></i>
                                            </div>
                                            <div class="absolute top-[20%] right-[25%] translate-x-1/2 -translate-y-1/2 text-center">
                                                <p class="text-xs font-semibold text-slate-500 mb-1">② 반납</p>
                                                <i data-lucide="arrow-down-right" class="w-8 h-8 text-slate-400"></i>
                                            </div>
                                            <div class="absolute bottom-[20%] right-[25%] translate-x-1/2 translate-y-1/2 text-center">
                                                 <i data-lucide="arrow-down-left" class="w-8 h-8 text-slate-400"></i>
                                                <p class="text-xs font-semibold text-slate-500 mt-1">③ 처리</p>
                                            </div>
                                            <div class="absolute bottom-[20%] left-[25%] -translate-x-1/2 translate-y-1/2 text-center">
                                                <i data-lucide="arrow-up-left" class="w-8 h-8 text-slate-400"></i>
                                                <p class="text-xs font-semibold text-slate-500 mt-1">④ 보충</p>
                                            </div>
                                        </div>
                                    </div>
                               </li>
                               <li>
                                   <strong>Case 2. 후반 편집자가 본사에 있는 경우:</strong>
                                   <div class="mt-4 p-4 bg-slate-50 rounded-lg border border-slate-200">
                                       <h4 class="font-bold text-center mb-6 text-slate-800">선형 상호작용 다이어그램</h4>
                                       <div class="flex items-center justify-center w-full py-4">
                                           <!-- Actor 1: Cameraman -->
                                           <div class="flex flex-col items-center text-center w-28">
                                               <i data-lucide="camera" class="w-10 h-10 text-slate-700"></i>
                                               <p class="font-bold text-sm mt-1">카메라 맨</p>
                                           </div>
                               
                                           <!-- Interaction 1 -->
                                           <div class="flex-1 flex flex-col items-center text-center px-2">
                                               <p class="text-xs font-semibold text-slate-500 -mb-1 whitespace-nowrap">① 카드 전달</p>
                                               <i data-lucide="arrow-right" class="w-8 h-8 text-slate-400"></i>
                                               <i data-lucide="arrow-left" class="w-8 h-8 text-slate-400 mt-2"></i>
                                               <p class="text-xs font-semibold text-slate-500 -mt-1 whitespace-nowrap">④ 카드 반환</p>
                                           </div>
                               
                                           <!-- Actor 2: Data Manager -->
                                           <div class="flex flex-col items-center text-center w-28">
                                               <i data-lucide="user" class="w-10 h-10 text-slate-700"></i>
                                               <p class="font-bold text-sm mt-1">데이터 매니저</p>
                                           </div>
                               
                                           <!-- Interaction 2 -->
                                           <div class="flex-1 flex flex-col items-center text-center px-2">
                                               <p class="text-xs font-semibold text-slate-500 -mb-1 whitespace-nowrap">② 데이터 전송</p>
                                               <i data-lucide="arrow-right" class="w-8 h-8 text-slate-400"></i>
                                               <i data-lucide="arrow-left" class="w-8 h-8 text-slate-400 mt-2"></i>
                                               <p class="text-xs font-semibold text-slate-500 -mt-1 whitespace-nowrap">③ 작업 후 복귀</p>
                                           </div>
                               
                                           <!-- Actor 3: Data Station -->
                                           <div class="flex flex-col items-center text-center w-28">
                                               <i data-lucide="laptop" class="w-10 h-10 text-slate-700"></i>
                                               <p class="font-bold text-sm mt-1">데이터 스테이션</p>
                                           </div>
                                       </div>
                                   </div>
                               </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="detail-manager">
             <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="keyboard"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>1. 데이터 생성 (On-site)</strong>
                    <p>전용 앱을 사용하여 현장에서 발생하는 모든 액션(베팅, 폴드 등), 보드 카드, 팟 사이즈를 실시간으로 기록합니다.</p>
                     <div class="mt-4 max-w-xs mx-auto bg-slate-800 rounded-[2.5rem] border-[14px] border-slate-800 shadow-xl">
                        <div class="w-full h-full bg-slate-800 rounded-[2rem] overflow-hidden">
                             <img src="https://github.com/garimto81/virtual_table_rehearsal/blob/main/KakaoTalk_20250901_221504466.jpg?raw=true" class="w-full h-auto" alt="Data entry app interface on a smartphone">
                        </div>
                    </div>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="ear"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>2. 정보 수령</strong>
                    <p>카메라 맨으로부터 촬영된 핸드의 파일 번호와 편집에 필요한 인/아웃점 가이드를 구두 또는 메신저로 전달받습니다.</p>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="file-spreadsheet"></i></div>
                 <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>3. 데이터 통합 및 공유</strong>
                    <p>앱에 기록한 데이터와 카메라 맨에게 받은 정보를 마스터 구글 시트에 정확하게 통합하여 기록하고, 해당 시트 링크를 <strong>후반팀</strong>에 실시간으로 공유합니다.</p>
                </div>
            </div>
             <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="server"></i></div>
                <div class="detail-step-content">
                    <strong>4. 메모리 카드 관리 (원격 워크플로우 시)</strong>
                     <div class="sub-step-card">
                        <strong>후반 편집자가 본사에 있는 경우 (Case 2)</strong>
                        <p>카메라 맨으로부터 메모리 카드를 수령하여 데이터 스테이션으로 이동, 데이터 전송을 완료한 후 다시 카메라 맨에게 안전하게 반환하는 역할을 수행합니다.</p>
                         <div class="mt-4 p-4 bg-slate-100 rounded-lg border border-slate-200">
                             <h4 class="font-bold text-center mb-6 text-slate-800">데이터 매니저 동선</h4>
                             <div class="flex items-center justify-center w-full py-4">
                                 <div class="flex flex-col items-center text-center w-28">
                                     <i data-lucide="camera" class="w-10 h-10 text-slate-700"></i>
                                     <p class="font-bold text-sm mt-1">카메라 맨</p>
                                 </div>
                                 <div class="flex-1 flex flex-col items-center text-center px-2">
                                     <p class="text-xs font-semibold text-slate-500 -mb-1 whitespace-nowrap">① 카드 수령</p>
                                     <i data-lucide="arrow-right" class="w-8 h-8 text-slate-400"></i>
                                     <i data-lucide="arrow-left" class="w-8 h-8 text-slate-400 mt-2"></i>
                                     <p class="text-xs font-semibold text-slate-500 -mt-1 whitespace-nowrap">④ 카드 반환</p>
                                 </div>
                                 <div class="flex flex-col items-center text-center w-28">
                                     <i data-lucide="user" class="w-10 h-10 text-emerald-600"></i>
                                     <p class="font-bold text-sm mt-1">데이터 매니저</p>
                                 </div>
                                 <div class="flex-1 flex flex-col items-center text-center px-2">
                                     <p class="text-xs font-semibold text-slate-500 -mb-1 whitespace-nowrap">② 데이터 전송</p>
                                     <i data-lucide="arrow-right" class="w-8 h-8 text-slate-400"></i>
                                     <i data-lucide="arrow-left" class="w-8 h-8 text-slate-400 mt-2"></i>
                                     <p class="text-xs font-semibold text-slate-500 -mt-1 whitespace-nowrap">③ 현장 복귀</p>
                                 </div>
                                 <div class="flex flex-col items-center text-center w-28">
                                     <i data-lucide="laptop" class="w-10 h-10 text-slate-700"></i>
                                     <p class="font-bold text-sm mt-1">데이터 스테이션</p>
                                 </div>
                             </div>
                             <div class="mt-4 pt-4 border-t border-slate-300">
                                 <h5 class="font-bold text-center mb-4 text-slate-700">파일 관리 프로세스</h5>
                                 <ol class="space-y-3 text-sm">
                                     <li class="flex items-center"><span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-200 text-slate-600 font-bold text-xs mr-3 shrink-0">1</span><i data-lucide="folder-plus" class="w-5 h-5 text-sky-600 mr-2 shrink-0"></i><span>PC에 각 <i data-lucide="camera" class="inline-block w-4 h-4 text-slate-500 mx-1"></i>카메라 별 폴더 생성</span></li>
                                     <li class="flex items-center"><span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-200 text-slate-600 font-bold text-xs mr-3 shrink-0">2</span><i data-lucide="file-input" class="w-5 h-5 text-sky-600 mr-2 shrink-0"></i><span>해당 폴더에 영상 저장</span></li>
                                     <li class="flex items-center"><span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-200 text-slate-600 font-bold text-xs mr-3 shrink-0">3</span><i data-lucide="cloud" class="w-5 h-5 text-green-600 mr-2 shrink-0"></i><span>구글 드라이브에 동일한 폴더 구조 생성</span></li>
                                     <li class="flex items-center"><span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-200 text-slate-600 font-bold text-xs mr-3 shrink-0">4</span><i data-lucide="upload-cloud" class="w-5 h-5 text-green-600 mr-2 shrink-0"></i><span>각 폴더에 영상 전송</span></li>
                                     <li class="flex items-center"><span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-200 text-slate-600 font-bold text-xs mr-3 shrink-0">5</span><i data-lucide="arrow-left-circle" class="w-5 h-5 text-slate-600 mr-2 shrink-0"></i><span>메모리 카드와 함께 현장 복귀</span></li>
                                 </ol>
                             </div>
                         </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="detail-editor">
             <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="folder-down"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>1. 자료 수령</strong>
                     <p>(프로덕션) 슬랙에 새로운 핸드 등록 확인</p>
                     <img src="https://github.com/garimto81/virtual_table_rehearsal/blob/main/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-09-01%20222904.png?raw=true" class="mt-2 rounded-lg border" alt="Slack 알림 예시">
                     <p class="mt-4">앱으로 불러오기를 하여 핸드 정보 확인</p>
                      <div class="mt-4 max-w-xs mx-auto bg-slate-800 rounded-[2.5rem] border-[14px] border-slate-800 shadow-xl">
                        <div class="w-full h-full bg-slate-800 rounded-[2rem] overflow-hidden">
                             <img src="https://github.com/garimto81/virtual_table_rehearsal/blob/main/KakaoTalk_20250901_221504466.jpg?raw=true" class="w-full h-auto" alt="앱 정보 확인 예시">
                        </div>
                    </div>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="file-check-2"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>2. 교차 검증</strong>
                    <p>수령한 영상과 앱의 데이터를 비교하여 플레이어, 핸드 정보, 보드 카드 등이 모두 일치하는지 면밀히 확인합니다.</p>
                     <div class="sub-step-card contingency-plan mt-4">
                         <strong>핸드 번호와 영상 불일치 시:</strong>
                         <p>해당 영상을 데이터 없이 작업할 수 있는 경우(예: 스토리텔링용)에는 작업을 진행하고, 그렇지 않은 경우 폐기합니다.</p>
                     </div>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="clapperboard"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>3. GFX 작업</strong>
                     <ul class="list-disc space-y-2">
                        <li>헤즈업 정보만으로 필요한 스트릿(Flop, Turn, River)까지 처리합니다.</li>
                        <li>핸드 시작 전, 무작위 포지션의 두 플레이어 정보와 버튼 위치만 먼저 정합니다.</li>
                        <li>앱의 위쪽에 있는 선수가 액션이 먼저 진행됩니다.</li>
                        <li>'첵/콜' 또는 '첵/첵'으로 넘어가는 스트릿은 앱에 기록된대로 신속하게 처리합니다.</li>
                    </ul>
                        <div class="mt-4 max-w-xs mx-auto shadow-xl">
                            <div class="w-full h-full bg-slate-800 overflow-hidden">
                                <img src="https://github.com/garimto81/virtual_table_plan/blob/main/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-09-01%20224608.png?raw=true" class="w-full h-auto" alt="앱 정보 확인 예시">
                            </div>
                    </div>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="film"></i></div>
                <div class="detail-step-content">
                    <strong>4. 편집 작업</strong>
                    <div class="space-y-2">
                        <p><strong>- 그래픽 완성 및 결합:</strong> 데이터가 적용된 Poker UI 그래픽을 완성하고, 해당 그래픽을 촬영 영상 위에 결합(오버레이)합니다.</p>
                        <p><strong>- 컷 편집:</strong> 불필요한 부분을 잘라내고, 인/아웃점 가이드를 참고하여 영상의 흐름을 다듬습니다.</p>
                    </div>
                                            <div class="w-full h-full bg-slate-800 overflow-hidden">
                                <img src="https://github.com/garimto81/virtual_table_plan/blob/main/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-09-01%20225035.png?raw=true" class="w-full h-auto" alt="앱 정보 확인 예시">
                            </div>
            </div>
        </div>
        <div id="detail-designer">
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="pencil-ruler"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>1. 에셋 제작</strong>
                    <p>방송 컨셉에 맞춰 카드, 칩, 선수 정보창, 베팅 금액 등 Poker UI 그래픽에 필요한 모든 시각적 에셋을 디자인하고 제작합니다.</p>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="layout-template"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>2. 시스템 설계</strong>
                    <p>후반 편집자가 구글 시트의 데이터를 손쉽게 연동하고 수정할 수 있도록 에프터이펙트 등의 툴을 사용하여 모션 그래픽 템플릿(MOGRT) 또는 유사한 형태의 시스템을 설계합니다.</p>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="package-check"></i></div>
                <div class="detail-step-content">
                    <strong>3. 패키지 전달</strong>
                    <p>완성된 모든 그래픽 에셋과 템플릿을 하나의 패키지로 정리하여, 프리 프로덕션 단계에서 <strong>후반 편집자</strong>에게 전달합니다.</p>
                </div>
            </div>
        </div>
        <div id="detail-tech">
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="scan-line"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>1. 네트워크 환경 분석</strong>
                    <p>대회 시작 전, 현장의 네트워크 상태(유선/무선 속도, 신호 강도, 안정성)를 사전에 면밀히 분석합니다.</p>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="router"></i></div>
                <div class="detail-step-connector"></div>
                <div class="detail-step-content">
                    <strong>2. 전용 라인 확보</strong>
                    <p>자동화 워크플로우(클라우드 업로드 등)에 필요한 최소 속도인 10Mbps 이상을 안정적으로 보장하는 유/무선 네트워크 환경을 구축합니다. 필요시 별도의 통신사와 협의하여 전용 회선을 설치합니다.</p>
                </div>
            </div>
            <div class="detail-step">
                <div class="detail-step-icon"><i data-lucide="share-2"></i></div>
                <div class="detail-step-content">
                    <strong>3. 정보 공유 및 지원</strong>
                    <p>구축된 네트워크 정보(Wi-Fi 이름/비밀번호, 유선 포트 위치 등)를 <strong>현장 PD팀</strong>에 명확히 공유하고, 운영 중 발생할 수 있는 네트워크 문제를 지속적으로 모니터링하고 지원합니다.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // --- Smart Popup Positioning Script ---
        document.addEventListener('DOMContentLoaded', () => {
            const groups = document.querySelectorAll('.group');

            groups.forEach(group => {
                const popup = group.querySelector('.workflow-popup');
                if (!popup) return;

                group.addEventListener('mouseenter', () => {
                    const cardRect = group.getBoundingClientRect();
                    const popupRect = popup.getBoundingClientRect();
                    const viewportWidth = window.innerWidth;
                    const margin = 16; // 1rem margin from viewport edge

                    // Calculate ideal centered position relative to the card
                    let idealLeft = cardRect.left + (cardRect.width / 2) - (popupRect.width / 2);
                    
                    // Adjust if it overflows left
                    if (idealLeft < margin) {
                        idealLeft = margin;
                    }
                    
                    // Adjust if it overflows right
                    if (idealLeft + popupRect.width > viewportWidth - margin) {
                        idealLeft = viewportWidth - popupRect.width - margin;
                    }
                    
                    // Apply the calculated position
                    // We subtract cardRect.left because the popup is positioned relative to the card
                    popup.style.left = `${idealLeft - cardRect.left}px`;
                });
            });
        
            // --- Modal Script ---
            const modal = document.getElementById('workflow-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const modalCloseBtn = document.getElementById('modal-close');
            const roleCards = document.querySelectorAll('[data-role]');
    
            function openModal(role) {
                const detailContent = document.getElementById(`detail-${role}`);
                const cardTitle = document.querySelector(`[data-role=${role}] .step-card h3`).textContent;
                
                if (detailContent) {
                    modalTitle.textContent = `${cardTitle} 상세 워크플로우`;
                    modalBody.innerHTML = detailContent.innerHTML;
                    lucide.createIcons(); // Re-render icons inside modal
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Prevent background scrolling
                }
            }
    
            function closeModal() {
                modal.classList.remove('active');
                document.body.style.overflow = ''; // Restore background scrolling
            }
    
            roleCards.forEach(card => {
                card.addEventListener('click', () => {
                    openModal(card.dataset.role);
                });
            });
    
            modalCloseBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
        });

    </script>
</body>
</html>


